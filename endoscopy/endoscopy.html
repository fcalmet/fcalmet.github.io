<!DOCTYPE html>
<!--
	 Copyright (C) 2025 by Fernando Calmet

	 Author: Fernando Calmet

	 This program is free software; you can redistribute it and/or modify
	 it under the terms of the GNU General Public License as published by
	 the Free Software Foundation, either version 3 of the License, or
	 (at your option) any later version.

	 This program is distributed in the hope that it will be useful,
	 but WITHOUT ANY WARRANTY; without even the implied warranty of
	 MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
	 GNU General Public License for more details.

	 You should have received a copy of the GNU General Public License
	 along with this program.  If not, see <https://www.gnu.org/licenses/>.
-->
<html lang="en">
  <head>
	<meta charset="UTF-8">
	<title>Endoscopy Reporting System</title>
	<link rel="stylesheet" href="endoscopy.css" />
  </head>
  <body>
	<h1>Endoscopy Reporting System</h1>
	<div class="app">
	  <div class="col">
		<h2>Procedure</h2>
		<select id="procedure-list" size="5"></select>
		<h2>Report</h2>
		<textarea id="report" cols="50"></textarea>
	  </div>
	  <div class="col">
		<h2>Finding</h2>
		<select id="finding-list" size="40"></select>
	  </div>
	  <div class="col multi" id="finding-options">
	  </div>
	  <div class="col">
		<h2>Interventions</h2>
		<select id="intervention-list" size="40"></select>
	  </div>
	  <div class="col multi" id="intervention-options">
	  </div>
	  <div class="col" id="selected-interventions">
		<h2>Selected</h2>
		<select id="sel-intervention-list" size="40"></select>
	  </div>
	</div>

	<!-- Inline JSON -->
	<script id="jsonData" type="application/json">
	 {
	   "procedures": [
		 { "name": "EGD", "sections": [ "Esophagus", "Stomach", "Duodenum", "Jejunum" ] },
		 { "name": "Colonoscopy", "sections": [ "DRE", "Ileum", "Colon" ] },
		 { "name": "Enteroscopy", "sections": [ "Esophagus", "Stomach", "Duodenum", "Jejunum", "Ileum", "Colon" ] },
		 { "name": "ERCP", "sections": [ "Esophagus", "Stomach", "Duodenum", "Jejunum", "Biliary", "Pancreatic duct" ] },
		 { "name": "EUS", "sections": [ "Endoscopic (EUS)", "Luminal (EUS)", "Pancreas (EUS)", "Biliary (EUS)", "Liver (EUS)", "Lymph nodes (EUS)" ] }
	   ],

	   "organFindings": [
		 { "organ": "Esophagus",
		   "findings": [
			 { "name": "Normal", "text": "Normal esophagus" },
			 { "name": "Achalasia", "text": "Dilated lumen with a tight lower esophageal sphincter, {consistent-suggestive} achalasia" },
			 { "name": "Angiectasia", "text": "{single-few-multiple-angiectasias} {bleeding-type} in the {*esophagus-location}" },
			 { "name": "Barrett esophagus", "text": "Salmon-colored mucosa in the distal esophagus {consistent-suggestive} Barrett esophagus (Prague C{#C} M{#M})" },
			 { "name": "Candida esophagitis", "text": "Candida esophagitis" },
			 { "name": "Clips", "text": "{#Number} previously placed clip(s) in the {*esophagus-location}" },
			 { "name": "Dieulafoy", "text": "A Dieulafoy lesion {bleeding-type} in the {esophagus-location}" },
			 { "name": "Diverticulum", "text": "A {small-large} diverticulum in the {esophagus-location}" },
			 { "name": "Eosinophilic esophagitis", "text": "Esophageal rings and longitudinal furrows {consistent-suggestive} eosinophilic esophagitis" },
			 { "name": "Esophagitis", "text": "LA grade {la-grade} esophagitis" },
			 { "name": "Foreign body", "text": "Foreign body in the {*esophagus-location}" },
			 { "name": "Inlet patch", "text": "A {#Size (mm)} mm inlet patch in the proximal esophagus" },
			 { "name": "Mallory-Weiss tear", "text": "Mallory-Weiss tear in the distal esophagus {bleeding-type}" },
			 { "name": "Mass", "text": "{stricture-type} mass in the {esophagus-location} at {#Location (cm)} cm, {traversable} with an {*gastroscope-type}" },
			 { "name": "Nodule", "text": "A {#Size (mm)} mm nodule in the {esophagus-location}" },
			 { "name": "Polyp", "text": "A {#Size (mm)} mm polyp in the {esophagus-location}" },
			 { "name": "Postoperative anatomy", "text": "Postoperative anatomy consistent with prior {esophageal-surgery}" },
			 { "name": "Schatzki ring", "text": "{sr-obstructing} Schatzki ring at the EGJ" },
			 { "name": "Stricture", "text": "{stricture-type} stricture at {#Location (cm)} cm, {traversable} with an {*gastroscope-type}" },
			 { "name": "Subepithelial lesion", "text": "A {#Size (mm)} mm subepithelial lesion in the {esophagus-location}" },
			 { "name": "Varices", "text": "{small-large} esophageal varices {bleeding-type} {gev-hrs}" }
		   ]
		 },

		 { "organ": "Stomach",
		   "findings": [
			 { "name": "Normal", "text": "Normal stomach" },
			 { "name": "Angiectasia", "text": "{single-few-multiple-angiectasias} {bleeding-type} {*stomach-location-modifier} {*stomach-location}" },
			 { "name": "Bezoar", "text": "A {small-medium-large} bezoar in the {*stomach-location-modifier} {*stomach-location}" },
			 { "name": "Clips", "text": "{#Number} previously placed clip(s) in the {*stomach-location-modifier} {*stomach-location}" },
			 { "name": "Dieulafoy", "text": "A Dieulafoy lesion {bleeding-type} in the {stomach-location-modifier} {stomach-location}" },
			 { "name": "Diverticulum", "text": "A {small-medium-large} diverticulum in the {stomach-location-modifier} {stomach-location}" },
			 { "name": "Ectopic pancreas", "text": "A {#Size (mm)} mm subepithelial lesion with central umbilication in the gastric antrum, {consistent-suggestive} of an ectopic pancreas" },
			 { "name": "GAVE", "text": "{mild-moderate-severe} gastric antral vascular ectasia" },
			 { "name": "Gastropathy", "text": "{mild-moderate-severe} {gastropathy-type} gastropathy in the {*stomach-location-modifier} {*stomach-location}" },
			 { "name": "Hiatal hernia", "text": "A {#Size (cm)} hiatal hernia {cameron-lesions}" },
			 { "name": "Mass", "text": "{stricture-type} mass in the {stomach-location-modifier} {stomach-location}" },
			 { "name": "Nodule", "text": "A {#Size (mm)} mm nodule in the {stomach-location-modifier} {stomach-location}" },
			 { "name": "Polyp (multiple)", "text": "Multiple {#Size (mm): from}-{#Size (mm): to} mm polyps in the {*stomach-location-modifier} {*stomach-location}" },
			 { "name": "Polyp (single)", "text": "A {#Size (mm)} mm polyp in the {stomach-location-modifier} {stomach-location}" },
			 { "name": "Postoperative anatomy", "text": "Postoperative anatomy consistent with prior {gastric-surgery}" },
			 { "name": "Pyloric stenosis", "text": "Pyloric stenosis, {traversable} with an {gastroscope-type}" },
			 { "name": "Subepithelial lesion", "text": "A {#Size (mm)} mm subepithelial lesion in the {stomach-location-modifier} {stomach-location}" },
			 { "name": "Ulcer", "text": "{#Number} ulcer(s) measuring up to {#Size (mm)} mm with {pud-forrest} in the {*stomach-location-modifier} {*stomach-location}" },
			 { "name": "Varices", "text": "{small-medium-large} gastric varices in the {gv-type} {bleeding-type} {gev-hrs}" }
		   ]
		 },

		 { "organ": "Duodenum",
		   "findings": [
			 { "name": "Normal", "text": "Normal examined duodenum" },
			 { "name": "Angiectasia", "text": "{single-few-multiple-angiectasias} {bleeding-type} {*duodenum-location}" },
			 { "name": "Celiac disease", "text": "Mucosal changes including scalloping in the {*duodenum-location}, {consistent-suggestive} celiac disease" },
			 { "name": "Clips", "text": "{#Number} previously placed clip(s) in the {*duodenum-location}" },
			 { "name": "Dieulafoy", "text": "A Dieulafoy lesion {bleeding-type} {duodenum-location}" },
			 { "name": "Diverticulum", "text": "A {small-medium-large} diverticulum in the {duodenum-location}" },
			 { "name": "Duodenopathy", "text": "{mild-moderate-severe} {duodenopathy-type} gastropathy in the {*duodenum-location}" },
			 { "name": "Mass", "text": "{stricture-type} mass in the {duodenum-location}" },
			 { "name": "Nodule", "text": "A {#Size (mm)} mm nodule in the {duodenum-location}" },
			 { "name": "Polyp", "text": "A {#Size (mm)} mm polyp in the {duodenum-location}" },
			 { "name": "Subepithelial lesion", "text": "A {#Size (mm)} mm subepithelial lesion in the {duodenum-location}" },
			 { "name": "Ulcer", "text": "{#Number} ulcer(s) measuring up to {#Size (mm)} mm with {pud-forrest} in the {*duodenum-location}" }
		   ]
		 },

		 { "organ": "DRE",
		   "findings": [
			 { "name": "Normal", "text": "Normal rectal exam" }
		   ]
		 },

		 { "organ": "Ileum",
		   "findings": [
			 { "name": "Normal", "text": "Normal examined terminal ileum" }
		   ]
		 },

		 { "organ": "Colon",
		   "findings": [
			 { "name": "Right colon retroflexion", "text": "Retroflexion performed in the right colon" },
			 { "name": "Normal", "text": "Normal colon" },
			 { "name": "Angiectasia", "text": "{single-few-multiple-angiectasias} {bleeding-type} {*colon-location}" },
			 { "name": "Dieulafoy", "text": "A Dieulafoy lesion {bleeding-type} {colon-location}" },
			 { "name": "Diverticulosis", "text": "{mild-moderate-severe} diverticulosis in the {*colon-location}" },
			 { "name": "Internal hemorrhoids", "text": "{small-medium-large} internal hemorrhoids" },
			 { "name": "Mass", "text": "{stricture-type} mass in the {colon-location}" },
			 { "name": "Polyp (single)", "text": "A {#Size (mm)} mm {polyp-morphology} polyp in the {colon-location}" },
			 { "name": "Polyp (multiple)", "text": "{#Number} {#Min size (mm)}-{#Max size (mm)} mm {polyps-morphology} polyps in the {*colon-location}" },
			 { "name": "Solitary rectal ulcer syndromoe", "text": "A {#Size (mm)} ulcer in the distal rectum, consistent with solitary rectal ulcer syndrome" },
			 { "name": "Ulcerative colitis", "text": "Continuous inflammation from the rectum to the {colon-location} {consistent-suggestive} {uc-extent} ({uc-mayo})" },
			 { "name": "Ulcerative proctitis", "text": "Inflammation in the rectum {consistent-suggestive} ulcerative proctitis ({uc-mayo}) " }
		   ]
		 },

		 { "organ": "Endoscopic (EUS)",
		   "findings": [
			 { "name": "Normal", "text": "Normal esophagus, stomach, and examined duodenum on limited examination with the echoendoscope" }
		   ]
		 },

		 { "organ": "Luminal (EUS)",
		   "findings": [
			 { "name": "SEL (esophagus)", "text": "A {#Size 1 (mm)} x {#Size 2 (mm)} mm {echogenicity} subepithelial lesion in the {esophagus-location}, arising from {eus-layer}" },
			 { "name": "SEL (stomach)", "text": "A {#Size 1 (mm)} x {#Size 2 (mm)} mm {echogenicity} subepithelial lesion in the {stomach-location-modifier} {stomach-location}, arising from {eus-layer}" },
			 { "name": "SEL (duodenum)", "text": "A {#Size 1 (mm)} x {#Size 2 (mm)} mm {echogenicity} subepithelial lesion in the {duodenum-location}, arising from {eus-layer}" },
			 { "name": "SEL (colon)", "text": "A {#Size 1 (mm)} x {#Size 2 (mm)} mm {echogenicity} subepithelial lesion in the {colon-location}, arising from {eus-layer}" }
		   ]
		 },

		 { "organ": "Pancreas (EUS)",
		   "findings": [
			 { "name": "Normal", "text": "Normal pancreatic parenchyma and duct" },
			 { "name": "PD dilation", "text": "PD dilation up to {#Size (mm)} mm" },
			 { "name": "Mass", "text": "A {echogenicity} mass measuring at least {#Size 1 (mm)} x {#Size 2 (mm)} mm in the {*pancreas-location}" }
		   ]
		 },

		 { "organ": "Biliary (EUS)",
		   "findings": [
			 { "name": "Normal (CBD)", "text": "Normal CBD measuring {#Size (mm)} mm" },
			 { "name": "Normal (major papilla)", "text": "Normal major papilla on {mp-visualization} visualization" },
			 { "name": "Normal (gallbladder)", "text": "Normal gallbladder" }

		   ]
		 },

		 { "organ": "Liver (EUS)",
		   "findings": [
			 { "name": "Normal (visualized)", "text": "Normal visualized portion of the liver" }
		   ]
		 },

		 { "organ": "Lymph nodes (EUS)",
		   "findings": [
			 { "name": "No lymphadenopathy", "text": "No lymphadenopathy identified" }
		   ]
		 }
	   ],

	   "organInterventions": [
		 { "organ": "Esophagus",
		   "interventions": [
			 { "name": "Banding", "text": "{#Bands placed} band(s) deployed with adequate decompression" },
			 { "name": "Botulinum toxin (LES)", "text": "LES botulinum toxin injection performed" },
			 { "name": "Botulinum toxin (distal esophagus)", "text": "Distal esophageal botulinum toxin injection performed" },
			 { "name": "Epinephrine injection", "text": "Epinephrine injection performed" },
			 { "name": "Biopsies (Seattle protocol)", "text": "Biopsied as per Seattle protocol" },
			 { "name": "Biopsies (proximal/distal)", "text": "Proximal and distal esophageal biopsies taken" },
			 { "name": "Biopsies", "text": "Biopsied" },
			 { "name": "Cautery (APC)", "text": "Treated with APC" },
			 { "name": "Cautery (bipolar)", "text": "Treated with bipolar cautery" },
			 { "name": "Clips", "text": "{#Clips deployed} clip(s) deployed" },
			 { "name": "Dilation (Savary-Gilliard)", "text": "Savary-Gilliard dilation performed to {#Size (Fr)} Fr" },
			 { "name": "Dilation (TTS balloon)", "text": "TTS balloon dilation performed to {#Size (mm)} mm" },
			 { "name": "EMR (band)", "text": "Removed by band-EMR" },
			 { "name": "EMR (one piece)", "text": "Removed by EMR in one piece" },
			 { "name": "EMR (piecemeal)", "text": "Removed by EMR in piecemeal fashion" },
			 { "name": "Polypectomy (cold forceps)", "text": "Removed with cold biopsy forceps" },
			 { "name": "Polypectomy (cold snare)", "text": "Removed with cold snare" },
			 { "name": "Polypectomy (hot snare)", "text": "Removed with hot snare" },
			 { "name": "RFA 360", "text": "Treated with RFA 360 ({#Ablations} ablations)" },
			 { "name": "RFA 90", "text": "Treated with RFA 90 ({#Ablations} ablations)" },
			 { "name": "RFA TTS", "text": "Treated with TTS RFA ({#Ablations} ablations)" }
		   ]
		 },
		 { "organ": "Stomach",
		   "interventions": [
			 { "name": "Biopsies", "text": "Biopsied" },
			 { "name": "Biopsies (random)", "text": "Random biopsies taken" },
			 { "name": "Biopsies (Sydney protocol)", "text": "Biopsied as per Sydney protocol" },
			 { "name": "Botulinum toxin (pyloric)", "text": "Pyloric botulinum toxin injection performed" },
			 { "name": "Cautery (APC)", "text": "Treated with APC" },
			 { "name": "Cautery (bipolar)", "text": "Treated with bipolar cautery" },
			 { "name": "Clips", "text": "{#Clips deployed} clip(s) deployed" },
			 { "name": "Dilation (TTS balloon)", "text": "TTS balloon dilation performed to {#Size (mm)} mm" },
			 { "name": "EMR (band)", "text": "Removed by band-EMR" },
			 { "name": "EMR (one piece)", "text": "Removed by EMR in one piece" },
			 { "name": "EMR (piecemeal)", "text": "Removed by EMR in piecemeal fashion" },
			 { "name": "Epinephrine injection", "text": "Epinephrine injection performed" },
			 { "name": "Polypectomy (cold forceps)", "text": "Removed with cold biopsy forceps" },
			 { "name": "Polypectomy (cold snare)", "text": "Removed with cold snare" },
			 { "name": "Polypectomy (hot snare)", "text": "Removed with hot snare" }
		   ]
		 },

		 { "organ": "Duodenum",
		   "interventions": [
			 { "name": "Biopsies", "text": "Biopsied" },
			 { "name": "Biopsies (random)", "text": "Random biopsies taken" },
			 { "name": "Cautery (APC)", "text": "Treated with APC" },
			 { "name": "Cautery (bipolar)", "text": "Treated with bipolar cautery" },
			 { "name": "Clips", "text": "{#Clips deployed} clip(s) deployed" },
			 { "name": "Dilation (TTS balloon)", "text": "TTS balloon dilation performed to {#Size (mm)} mm" },
			 { "name": "EMR (band)", "text": "Removed by band-EMR" },
			 { "name": "EMR (one piece)", "text": "Removed by EMR in one piece" },
			 { "name": "EMR (piecemeal)", "text": "Removed by EMR in piecemeal fashion" },
			 { "name": "Epinephrine injection", "text": "Epinephrine injection performed" },
			 { "name": "Polypectomy (cold forceps)", "text": "Removed with cold biopsy forceps" },
			 { "name": "Polypectomy (cold snare)", "text": "Removed with cold snare" },
			 { "name": "Polypectomy (hot snare)", "text": "Removed with hot snare" }
		   ]
		 },

		 { "organ": "DRE",
		   "interventions": []
		 },

		 { "organ": "Ileum",
		   "interventions": [
			 { "name": "Biopsies", "text": "Biopsied" },
			 { "name": "Biopsies (random)", "text": "Random biopsies taken" },
			 { "name": "Cautery (APC)", "text": "Treated with APC" },
			 { "name": "Cautery (bipolar)", "text": "Treated with bipolar cautery" },
			 { "name": "Clips", "text": "{#Clips deployed} clip(s) deployed" },
			 { "name": "Dilation (TTS balloon)", "text": "TTS balloon dilation performed to {#Size (mm)} mm" },
			 { "name": "EMR (band)", "text": "Removed by band-EMR" },
			 { "name": "EMR (one piece)", "text": "Removed by EMR in one piece" },
			 { "name": "EMR (piecemeal)", "text": "Removed by EMR in piecemeal fashion" },
			 { "name": "Epinephrine injection", "text": "Epinephrine injection performed" },
			 { "name": "Polypectomy (cold forceps)", "text": "Removed with cold biopsy forceps" },
			 { "name": "Polypectomy (cold snare)", "text": "Removed with cold snare" },
			 { "name": "Polypectomy (hot snare)", "text": "Removed with hot snare" }
		   ]
		 },

		 { "organ": "Colon",
		   "interventions": [
			 { "name": "Biopsies (random)", "text": "Random biopsies taken" },
			 { "name": "Biopsies", "text": "Biopsied" },
			 { "name": "Cautery (APC)", "text": "Treated with APC" },
			 { "name": "Cautery (bipolar)", "text": "Treated with bipolar cautery" },
			 { "name": "Clips", "text": "{#Clips deployed} clip(s) deployed" },
			 { "name": "Dilation (TTS balloon)", "text": "TTS balloon dilation performed to {#Size (mm)} mm" },
			 { "name": "EMR (band)", "text": "Removed by band-EMR" },
			 { "name": "EMR (one piece)", "text": "Removed by EMR in one piece" },
			 { "name": "EMR (piecemeal)", "text": "Removed by EMR in piecemeal fashion" },
			 { "name": "Epinephrine injection", "text": "Epinephrine injection performed" },
			 { "name": "Hot avulsion", "text": "Treated with hot avulsion" },
			 { "name": "Polypectomy (cold forceps)", "text": "Removed with cold biopsy forceps" },
			 { "name": "Polypectomy (cold snare)", "text": "Removed with cold snare" },
			 { "name": "Polypectomy (hot snare)", "text": "Removed with hot snare" },
			 { "name": "Snare tip cautery", "text": "Snare tip cautery performed" },
			 { "name": "Tattoo", "text": "Tattooed" }
		   ]
		 },

		 { "organ": "Pancreas",
		   "interventions": [
			 { "name": "FNA", "text": "FNA performed ({#Passes} passes) {fnab-preliminary}" },
			 { "name": "FNB", "text": "FNB performed ({#Passes} passes)" }
		   ]
		 },

		 { "organ": "Biliary",
		   "interventions": [
			 { "name": "", "text": "" }
		   ]
		 },

		 { "organ": "Liver",
		   "interventions": [
			 { "name": "", "text": "" }
		   ]
		 },

		 { "organ": "Lymph nodes",
		   "interventions": [
			 { "name": "", "text": "" }
		   ]
		 }
	   ],

	   "selection": [
		 { "name": "bleeding-type", "label": "Bleeding", "options": [ [ "no bleeding", "without bleeding" ], [ "oozing", "with oozing of blood" ], [ "spurting", "with spurting of blood" ] ] },
		 { "name": "colon-location", "label": "Location", "options": [ "entire colon", "cecum", "ascending colon", "hepatic flexure", "transverse colon", "splenic flexure", "descending colon", "sigmoid colon", "rectum" ] },
		 { "name": "cameron-lesions", "label": "Cameron lesions", "options": [ [ "", "" ], [ "none", " without Cameron lesions" ], [ "non-bleeding", " with non-bleeding Cameron lesions" ], [ "oozing", " with Cameron lesions with oozing" ], [ "spurting", " with Cameron lesions with spurting" ] ] },
		 { "name": "consistent-suggestive", "label": "Diagnostic certainty", "options": [[ "consistent", "consistent with" ], [ "suggestive", "suggestive of" ]] },
		 { "name": "duodenopathy-type", "label": "Duodenopathy type", "options": [ "", "erythematous", "erosive" ] },
		 { "name": "duodenum-location", "label": "Location", "options": [ [ "entire examined duodenum", "entire examined duodenum" ], [ "D1", "duodenal bulb" ], [ "D2", "second portion of the duodenum" ], [ "D3", "third portion of the duodenum" ], [ "D4", "fourth portion of the duodenum" ], [ "periampullary region", "periampullary region" ], [ "D1-D2", "first and second portion of the duodenum" ], [ "D1-D3", "first, second, and third portion of the duodenum" ], [ "D1-D4", "entire duodenum" ], [ "D2-D3", "second and third portion of the duodenum" ], [ "D2-D4", "second, third, and fourth portion of the duodenum" ], [ "D3-D4", "third and fourth portion of the duodenum" ] ] },
		 { "name": "echogenicity", "label": "Echogenicity", "options": [ "hypoechoic", "isoechoic", "hyperechoic", "heterogeneous" ] },
		 { "name": "esophageal-surgery", "label": "Surgery", "options": [ "esophagectomy with gastric pull-up", "esophagectomy with colonic interposition" ] },
		 { "name": "esophagus-location", "label": "Location", "options": [ "entire esophagus", "proximal esophagus", "mid esophagus", "distal esophagus" ] },
		 { "name": "eus-layer", "label": "EUS layer", "options": [ "layer 1 (superficial mucosa)", "layer 2 (deep mucosa)", "layer 3 (submucosa)", "layer 4 (muscularis propria)", "layer 5 (serosa)" ] },
		 { "name": "fnab-preliminary", "label": "Preliminary cytology", "options": [ [ "", "" ], [ "benign", "with preliminary cytology negative for malignancy" ], [ "indeterminate", "with preliminary cytology indeterminate for malignancy" ], [ "malignant", "with preliminary cytology suggestive of malignancy" ]   ] },
		 { "name": "gastric-surgery", "label": "Surgery", "options": [ "Rouy-en-Y gastric bypass", "sleeve gastrectomy", "Billroth I anastomosis", "Billroth II anastomosis" ] },
		 { "name": "gastropathy-type", "label": "Gastropathy type", "options": [ "", "erythematous", "erosive", "portal hypertensive" ] },
		 { "name": "gastroscope-type", "label": "Gastroscope type", "options": [ "adult gastroscope", "ultraslim gastroscope" ] },
		 { "name": "gev-hrs", "label": "High risk stigmata", "options": [ [ "", "" ], [ "no", "without high risk stigmata" ], [ "yes", "with high risk stigmata" ] ] },
		 { "name": "gv-type", "label": "GV Type", "options": [ [ "GOV1 (lesser curvature)", "lesser curvature in continuity with esophageal varices (GOV1)" ], [ "GOV2 (fundal)", "gastric fundus in continuity with esophageal varices (GOV2)" ], [ "IGV1 (fundus)", "gastric fundus (IGV1)" ], [ "IGV2 (body)", "gastric body (IGV2)" ], [ "IGV2 (antrum)", "gastric antrum (IGV2)" ] ] },
		 { "name": "la-grade", "label": "LA grade", "options": [ "A", "B", "C", "D" ] },
		 { "name": "mild-moderate-severe", "label": "Severity", "options": [ "mild", "moderate", "severe" ] },
		 { "name": "mp-visualization", "label": "Visualization", "options": [ "endoscopic and endosonographic", "endosonographic", "endoscopic" ] },
		 { "name": "pancreas-location", "label": "Location", "options": [ "pancreatic uncinate process", "pancreatic head", "pancreatic neck", "pancreatic body", "pancreatic tail" ] },
		 { "name": "polyp-morphology", "label": "Morphology", "options": [ "sessile", "flat", "pedunculated", "carpetted" ] },
		 { "name": "polyps-morphology", "label": "Morphology", "options": [ "sessile", "flat", "pedunculated", "carpetted", "sessile/flat", "sessile/pedunculated", "flat/pedunculated" ] },
		 { "name": "pud-forrest", "label": "Forrest classification", "options": [ "pulsatile bleeding (Forrest Ia)", "oozing of blood (Forrest Ib)", "a visible vessel (Forrest IIa)", "an adherent clot (Forrest IIb)", "a pigmented spot (Forrest IIc)", "a clean-base (Forrest III)" ] },
		 { "name": "single-few-multiple-angiectasias", "label": "Number", "options": [ ["single", "a single angiectasia"], ["few", "a few angiectasias"], ["multiple", "multiple angiectasias"] ] },
		 { "name": "small-large", "label": "Size", "options": [ "small", "large" ] },
		 { "name": "small-medium-large", "label": "Size", "options": [ "small", "medium", "large" ] },
		 { "name": "sr-obstructing", "label": "Obstructing?", "options": [ "Widely patent, non-obstructing", "Partially obstructing", "Obstructing" ] },
		 { "name": "stomach-location", "label": "Location", "options": [ "gastric fundus/body", "gastric body/antrum", "gastric fundus", "gastric body", "gastric antrum", "cardia", "incisura" ] },
		 { "name": "stomach-location-modifier", "label": "Location", "options": [ [ "", "" ], [ "greater curvature", "greater curvature of the" ], [ "lesser curvature", "lesser curvature of the" ], [ "anterior wall", "anterior wall of the" ], [ "posterior wall", "posterior wall of the" ] ] },
		 { "name": "stricture-type", "label": "Appearance", "options": [ "Benign-appearing", "Malignant-appearing", "Indeterminate" ] },
		 { "name": "traversable", "label": "Traversable", "options": [ "traversable", "not traversable" ] },
		 { "name": "uc-extent", "label": "UC extent", "options": [ "left-sided UC", "pancolonic UC" ] },
		 { "name": "uc-mayo", "label": "Severity", "options": [ "Mayo 0", "Mayo 1", "Mayo 2", "Mayo 3" ] }
	   ],

	   "replace": [
		 [ "proximal esophagus and mid esophagus", "proximal and mid esophagus" ],
		 [ "proximal esophagus, mid esophagus, and distal esophagus", "entire esophagus" ],
		 [ "mid esophagus and distal esophagus", "mid and distal esophagus" ],
		 [ "proximal esophagus and distal esophagus", "proximal and distal esophagus" ],
		 [ "gastric fundus and gastric body", "gastric fundus and body" ],
		 [ "gastric fundus and gastric antrum", "gastric fundus and antrum" ],
		 [ "gastric body and gastric antrum", "gastric body and antrum" ],
		 [ "gastric fundus, gastric body, and gastric antrum", "gastric fundus, body, and antrum" ],
		 [ "gastric fundus, gastric body, and cardia", "gastric fundus, body, and cardia" ],
		 [ "gastric fundus, gastric body, and incisura", "gastric fundus, body, and incisura" ],
		 [ "gastric fundus, gastric antrum, and cardia", "gastric fundus, antrum, and cardia" ],
		 [ "gastric fundus, gastric antrum, and incisura", "gastric fundus, antrum, and incisura" ],
		 [ "gastric body, gastric antrum, and cardia", "gastric body, antrum, and cardia" ],
		 [ "gastric body, gastric antrum, and incisura", "gastric body, antrum, and incisura" ],
		 [ "gastric fundus, gastric body, gastric antrum, and cardia", "gastric fundus, body, antrum, and cardia" ],
		 [ "gastric fundus, gastric body, gastric antrum, and incisura", "gastric fundus, body, antrum, and incisura" ],
		 [ "gastric fundus, gastric body, cardia, and incisura", "gastric fundus, body, cardia, and incisura" ],
		 [ "gastric fundus, gastric antrum, cardia, and incisura", "gastric fundus, antrum, cardia, and incisura" ],
		 [ "gastric body, gastric antrum, cardia, and incisura", "gastric body, antrum, cardia, and incisura" ],
		 [ "gastric fundus, gastric body, gastric antrum, cardia, and incisura", "gastric fundus, body, antrum, cardia, and incisura" ],
		 [ "duodenal bulb and second portion of the duodenum", "first and second portion of the duodenum" ],
		 [ "duodenal bulb and third portion of the duodenum", "first and third portion of the duodenum" ],
		 [ "duodenal bulb and fourth portion of the duodenum", "first and fourth portion of the duodenum" ],
		 [ "second portion of the duodenum and third portion of the duodenum", "second and third portion of the duodenum" ],
		 [ "second portion of the duodenum and fourth portion of the duodenum", "second and fourth portion of the duodenum" ],
		 [ "third portion of the duodenum and fourth portion of the duodenum", "third and fourth portion of the duodenum" ],
		 [ "duodenal bulb, second portion of the duodenum, and third portion of the duodenum", "first, second, and third portion of the duodenum" ],
		 [ "duodenal bulb, second portion of the duodenum, and fourth portion of the duodenum", "first, second, and fourth portion of the duodenum" ],
		 [ "duodenal bulb, third portion of the duodenum, and fourth portion of the duodenum", "first, third, and fourth portion of the duodenum" ],
		 [ "second portion of the duodenum, third portion of the duodenum, and fourth portion of the duodenum", "second, third, and fourth portion of the duodenum" ],
		 [ "duodenal bulb, second portion of the duodenum, third portion of the duodenum, and fourth portion of the duodenum", "entire duodenum" ]
	   ]
	 }

	</script>
	<script src="endoscopy.js" type="text/javascript"></script>
	<script>
     const db = JSON.parse($('jsonData').textContent);

	 populateProcedureList();

     $('procedure-list')
	   .addEventListener('change', selectProcedure);

	 $('finding-list')
	   .addEventListener('change', selectFinding);

	 $('finding-list')
	   .addEventListener('dblclick', addFinding); // cross event

	 $('finding-list')
		 .addEventListener('keydown', (event) => {
		   if (event.key === 'Enter') {
			 event.preventDefault();
			 addFinding();
		   }
		 });

	 $('intervention-list')
	   .addEventListener('change', selectIntervention);

	 $('intervention-list')
	   .addEventListener('dblclick', addIntervention);

	 $('intervention-list')
	   .addEventListener('keydown', (event) => {
		 if (event.ctrlKey && event.key === 'Enter') {
		   event.preventDefault();
		   addFinding();
		 } else if (event.key === 'Enter') {
		   event.preventDefault();
		   addIntervention();
		 }
	   });

	 $('sel-intervention-list')
	   .addEventListener('keydown', (event) => {
		 if (event.ctrlKey && event.key === 'ArrowUp') {
		   event.preventDefault();
		   moveSelectedInterventionUp();
		 } else if (event.ctrlKey && event.key === 'ArrowDown') {
		   event.preventDefault();
		   moveSelectedInterventionDown(event);
		 } else if (event.ctrlKey && event.key === 'Enter') {
		   event.preventDefault();
		   addFinding();
		 } else if (event.key === 'Delete') {
		   event.preventDefault();
		   deleteSelectedIntervention(event);
		 }
	   });

	 $('procedure-list').selectedIndex = 0;
	 $('procedure-list').dispatchEvent(new Event('change'));
	 $('finding-list').selectedIndex = 1;
	 $('finding-list').dispatchEvent(new Event('change'));
	</script>
  </body>
</html>
